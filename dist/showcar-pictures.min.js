"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function addClass(e,t){return t.classList.add(e),t}function removeClass(e,t){return t.classList.remove(e),t}function containsClass(e,t){return t.classList.contains(e)}function dispatchEvent(e,t,s){var i=new CustomEvent(e,{detail:t,bubbles:!0});return s.dispatchEvent(i),s}function getParentByClassName(e,t){for(;t&&!containsClass(e,t);)t=t.parentNode;return t}function merge(e,t){var s={};for(var i in e)s[i]=e[i];for(var i in t)s[i]=t[i];return s}var _createClass=function(){function e(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,s,i){return s&&e(t.prototype,s),i&&e(t,i),t}}(),Pictures=function(){function e(t){_classCallCheck(this,e),this.element=t,this.thumbnailsVisible=!1,this.fullScreenState=!1,this.element.addEventListener("as24-carousel.slide",function(e){var t=void 0;e.stopPropagation(),"slider"===e.detail.role&&(t=merge({fullscreen:this.fullScreenState},e.detail),dispatchEvent("as24-pictures.slide",t,this.element))}.bind(this))}return _createClass(e,[{key:"initThumbnails",value:function(){var e=this;this.thumbnailsItems=this.thumbnails.querySelectorAll(".as24-carousel__item"),this.thumbnailsItems&&(addClass("active",this.thumbnailsItems[0]),this.thumbnails.addEventListener("click",function(t){t.preventDefault();var s=Array.from(e.thumbnails.querySelectorAll(".as24-carousel__item")).indexOf(getParentByClassName("as24-carousel__item",t.target));s>=0&&e.slider.goTo(s+1)}))}},{key:"addSlider",value:function(){var e=this;this.slider.addEventListener("as24-carousel.slide",function(t){var s=t.detail.index;switch(t.detail.role){case"slider":e.thumbnails.goTo(s,{notify:!0});break;case"thumbnails":e.slider.goTo(s,{notify:!0})}[].forEach.call(e.thumbnailsItems,function(e){return removeClass("active",e)}),addClass("active",e.thumbnailsItems[s])})}},{key:"toggleFullScreen",value:function(){window.document.body.clientWidth<1025||(this.fullScreenState=!this.fullScreenState,this.fullScreenState?addClass("as24-pictures--fullscreen",this.element):removeClass("as24-pictures--fullscreen",this.element),dispatchEvent("as24-pictures.fullscreen",{fullscreen:this.fullScreenState},this.element),this.thumbnails&&this.thumbnails.redraw(),this.slider&&this.slider.redraw())}},{key:"fullScreenOpenHandler",value:function(e){this.fullScreenState||"img"!==e.target.nodeName.toLowerCase()||this.toggleFullScreen()}},{key:"fullScreenCloseHandler",value:function(e){this.fullScreenState&&containsClass("as24-pictures__fullscreen-close",e.target)&&this.toggleFullScreen()}},{key:"attached",value:function(){this.container=this.element.querySelector(".as24-pictures__container"),this.slider=this.element.querySelector("[role=slider]"),this.slider&&(this.addSlider(),this.fullScreenOpenListener=this.fullScreenOpenHandler.bind(this),this.slider.addEventListener("click",this.fullScreenOpenListener)),this.thumbnails=this.element.querySelector(".as24-pictures__thumbnails"),this.thumbnails&&this.initThumbnails(),this.fullScreenCloseListener=this.fullScreenCloseHandler.bind(this),this.element.addEventListener("click",this.fullScreenCloseListener),this.closeButton=this.element.querySelector(".as24-pictures__fullscreen-close"),this.closeButton&&this.closeButton.addEventListener("click",this.fullScreenCloseListener)}},{key:"detached",value:function(){this.fullScreen=this.element.querySelector("as24-pictures as24-carousel"),this.fullScreen&&this.fullScreen.removeEventListener("click",this.fullScreenOpenListener),this.closeButton=this.element.querySelector(".as24-pictures__fullscreen-close"),this.closeButton&&this.closeButton.addEventListener("click",this.fullScreenCloseListener),this.element.removeEventListener("click",this.fullScreenCloseListener),this.removeContainer()}},{key:"removeContainer",value:function(){var e=this;Array.from(this.container.children).forEach(function(t){return e.container.removeChild(t)}),this.wrapper.removeChild(this.container)}},{key:"removeSlide",value:function(e){e>this.slider.carousel.container.children.length-1||(this.slider.carousel.container.children[e].remove(),this.thumbnails.carousel.container.children[e].remove(),this.slider.carousel.goTo(1,{notify:!1}),this.thumbnails.carousel.goTo(1,{notify:!1}))}}]),e}();!function(){var e=function(){this.pictures=new Pictures(this)},t=function(){this.pictures.attached()},s=function(){this.carousel.detached(),delete this.carousel};try{document.registerElement("as24-pictures",{prototype:Object.assign(Object.create(HTMLElement.prototype,{createdCallback:{value:e},attachedCallback:{value:t},detachedCallback:{value:s}}),{removeSlide:function(e){this.pictures.removeSlide(e)}})})}catch(e){window&&window.console&&window.console.warn('Failed to register CustomElement "as24-pictures".',e)}}();
//# sourceMappingURL=dist/showcar-pictures.min.js.map